package main

import (
	"github.com/stretchr/testify/assert"
	"testing"
)

var testPatterns = []SignalPattern{
	{
		in:  []int{0b10010, 0b1111111, 0b1111110, 0b1111101, 0b1010110, 0b1111100, 0b1111011, 0b111110, 0b101111, 0b11010},
		out: []int{0b1111111, 0b111110, 0b1111110, 0b1010110},
	},
	{
		in:  []int{0b1111011, 0b1011110, 0b1000110, 0b1000100, 0b1111111, 0b1111010, 0b1101111, 0b11111, 0b1111110, 0b1110100},
		out: []int{0b1111110, 0b1000110, 0b1111111, 0b1000100},
	},
	{
		in:  []int{0b1111011, 0b1000100, 0b11111, 0b1101011, 0b1101111, 0b1111110, 0b1001111, 0b1100101, 0b1000110, 0b1111111},
		out: []int{0b1000100, 0b1000100, 0b1101111, 0b1000110},
	},
	{
		in:  []int{0b1111110, 0b1110, 0b111111, 0b1011011, 0b100111, 0b110, 0b111101, 0b11111, 0b1111101, 0b1111111},
		out: []int{0b111111, 0b11111, 0b1111101, 0b110},
	},
	{
		in:  []int{0b1111111, 0b1100010, 0b1100000, 0b1110011, 0b111011, 0b1110100, 0b1010111, 0b1110111, 0b1011111, 0b1101111},
		out: []int{0b1110100, 0b1111111, 0b1100010, 0b1110011},
	},
	{
		in:  []int{0b1110011, 0b101, 0b1110111, 0b1111111, 0b1111101, 0b1101110, 0b10111, 0b1111011, 0b1100111, 0b100101},
		out: []int{0b1111111, 0b10111, 0b101, 0b1111111},
	},
	{
		in:  []int{0b1101110, 0b1101000, 0b1111111, 0b1110100, 0b1111011, 0b111111, 0b111110, 0b1001111, 0b1111110, 0b1100000},
		out: []int{0b1110100, 0b111110, 0b1110100, 0b1111111},
	},
	{
		in:  []int{0b1111110, 0b1110111, 0b1110110, 0b1111101, 0b1001111, 0b11000, 0b111010, 0b11100, 0b1111111, 0b1011110},
		out: []int{0b11000, 0b1110111, 0b1001111, 0b1110110},
	},
	{
		in:  []int{0b1111011, 0b1111110, 0b1011100, 0b110111, 0b1000110, 0b1111111, 0b1000100, 0b1101111, 0b1111010, 0b1110110},
		out: []int{0b1111111, 0b1000110, 0b1000100, 0b1000110},
	},
	{
		in:  []int{0b1100111, 0b1100100, 0b1111111, 0b1010111, 0b1100000, 0b1011111, 0b1110001, 0b1110111, 0b101111, 0b1111110},
		out: []int{0b1110001, 0b1100111, 0b1100000, 0b1010111},
	},
}

func TestPart1(t *testing.T) {
	assert.Equal(t, 26, CountUnique(testPatterns))
}

func TestPart2(t *testing.T) {
	assert.Equal(t, 61229, DecodeSignals(testPatterns))
}
