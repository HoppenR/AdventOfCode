package main

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

var testAlgo = `..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#.` +
	`.#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#..` +
	`....#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......` +
	`#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##` +
	`.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##` +
	`...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#` +
	`.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#`

var testImage = &Image{
	pixels: map[Pixel]struct{}{
		{0, 0}: {},
		{3, 0}: {},
		{0, 1}: {},
		{0, 2}: {},
		{1, 2}: {},
		{4, 2}: {},
		{2, 3}: {},
		{2, 4}: {},
		{3, 4}: {},
		{4, 4}: {},
	},
	max:  4,
	algo: testAlgo,
}

func TestPart1(t *testing.T) {
	assert.Equal(t, 35, Enhance(testImage, 2))
}

func TestPart2(t *testing.T) {
	assert.Equal(t, 3351, Enhance(testImage, 50-2))
}
